// ScrollPatrol - Fires events when DOM elements scroll into view
// @andygrn 2013
(function(){function d(a){this.listeners=[];this.offset=a;var b=this;a=function(){b.check()};window.addEventListener?window.addEventListener("scroll",a,!1):window.attachEvent&&window.attachEvent("onscroll",a)}d.prototype.getOffsetTop=function(a){var b=0;if(a.offsetParent){do b+=a.offsetTop,a=a.offsetParent;while(a)}return b=Math.max(b,0)};d.prototype.add=function(a){var b=a.leave||function(){};this.listeners.push({element:a.element,enter:this.createBreakerFunction(a.enter||function(){}),leave:this.createBreakerFunction(b)});this.check()};d.prototype.check=function(){for(var a=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,b,d,e=0,c;c=this.listeners[e];e+=1)b=this.getOffsetTop(c.element)-this.offset,d=b+c.element.offsetHeight,a>=b&&a<=d?(c.leave.reset(),c.enter(c.element,a)):(c.enter.reset(),c.leave(c.element,a))};d.prototype.createBreakerFunction=function(a){var b=function(){b.called||(b.called=!0,a.apply(a,arguments))};b.reset=function(){this.called=!1};return b};window.ScrollPatrol=d})();
